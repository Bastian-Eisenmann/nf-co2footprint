# README: CPU TDP Processing Script

## Overview
This script processes CSV files to extract and calculate CPU-related specifications such as Thermal Design Power (TDP), core count, thread count, and derived metrics like TDP per core and TDP per thread. It supports data processing for AMD, Ampere, Intel, and Green Algorithms processors and outputs a consolidated CSV file.

---

## Features
- Parses multiple CSV files from different vendors (AMD, Ampere, Intel, and Green Algorithms).
- Calculates additional metrics:
  - **TDP per Core**
  - **TDP per Thread**
- Handles missing or malformed data gracefully.
- Updates the csv `TDP_cpu.v2.2.csv` in head directory.
- Script outputs currently a format as provided by GreenAlgorithms project. The script can be easy extended to also show additional data like cpu manufactorer, number of threads or TDP per thread.
---

## Requirements
### Software
- Python 3.7 or later
- Required Libraries:
  - `csv`
  - `os`

### File Structure
- **AMD:** Contains the AMD CSV file (e.g., `amd-all-specification.csv`). The csv got generated by downloading the table from [here](https://www.amd.com/en/products/specifications/processors.html)
- **AMPERE:** Contains Ampere CSV files (e.g., `ampere-altra-specification.csv`, `ampere-one-specification.csv`). Both tables got copied from the websites: [Ampere Altra Specifications](https://amperecomputing.com/briefs/ampere-altra-family-product-brief), [Ampere One Specifications](https://amperecomputing.com/briefs/ampereone-family-product-brief).
- **Intel:** Directory containing Intel CSV files. Intel does not provide a complete overview list of their cpus. Instead the [Intel product pages](https://www.intel.com/content/www/us/en/products/details/processors.html) needs to be viwed step by step and processors must be added to the "compare products" list. Afterwards the comparison results can be downloaded which matches one file in the `Intel` folder. Analysis was performed on all available CPUs from the "XEON" series. 
- **GreenAlgorithms:** Contains the Green Algorithms CSV file. Note: The file provided by the [Green Algorithms Project](https://github.com/GreenAlgorithms/green-algorithms-tool) got preprocessed with the script `pre_process.py` which added the number of threads and the cpu manufactorer to the .csv resulting in file `TDP_cpu.v2.2.updated.csv`.

---

## How to Use
1. Ensure the required directories and files are organized as follows:
    ```
    ├── AMD/
    │   └── amd-all-specification.csv
    ├── AMPERE/
    │   ├── ampere-altra-specification.csv
    │   └── ampere-one-specification.csv
    ├── Intel/
    │   └── (Intel CSV files)
    ├── GreenAlgorithms/
    │   └── TDP_cpu.v2.2.updated.csv
    ├── merge.py
    ```

2. Run the script:
    ```bash
    python merge.py
    ```

3. The script will overwrite the file `TDP_cpu.v2.2.csv` in the head directory.

---

## Output CSV Format
The script generates an output file with the following columns:
- `model`: Processor model name.
- `TDP`: Thermal Design Power in watts.
- `n_cores`: Number of cores.
- `TDP_per_core`: TDP divided by the number of cores.
- `source`: Source URL for the data.

---

## Example Output
Example row in the output CSV:
```csv
model,TDP,n_cores,TDP_per_core,source
Ryzen 3 PRO 2200G,65,4,16.25,https://www.amd.com/en/products/specifications/processors.html
```

---

## References
AMD:
- https://www.amd.com/en/products/specifications/processors.html

Ampere:
- https://amperecomputing.com/briefs/ampere-altra-family-product-brief
- https://amperecomputing.com/briefs/ampereone-family-product-brief

Intel:
- https://www.intel.com/content/www/us/en/products/details/processors.html

Green Algorithms Project:
- https://github.com/GreenAlgorithms/green-algorithms-tool